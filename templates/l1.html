<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>L1 | –ü–æ–¥–∞—á–∞ –≤–∏—Ç—Ä–∞—Ç</title>
    <style>
        body { background-color: #f8f9fa; }
        .card { border-radius: 15px; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .category-box { background: #fff; border: 1px solid #dee2e6; border-radius: 10px; padding: 15px; }
        #pasteArea { border: 2px dashed #ccc; cursor: pointer; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark mb-4">
    <div class="container">
        <span class="navbar-brand"><strong>{{ user.username }}</strong> ({{ user.city }})</span>
        <div class="d-flex">
            <a href="/export_excel?month={{ selected_month }}" class="btn btn-outline-info btn-sm me-2">üìä Excel {{ selected_month }}</a>
            <a href="/logout" class="btn btn-danger btn-sm">–í–∏–π—Ç–∏</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white fw-bold py-3">–ù–æ–≤–∞ –∑–∞—è–≤–∫–∞</div>
                <div class="card-body p-4">
                    <form action="/add_expense" method="POST" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-6 mb-3">
                                <label class="small fw-bold">–°—É–º–∞ (–≥—Ä–Ω)</label>
                                <input type="number" step="0.01" name="amount" class="form-control" required>
                            </div>
                            <div class="col-6 mb-3">
                                <label class="small fw-bold">–†–µ–≥—ñ–æ–Ω (–¶–∏—Ñ—Ä–∏)</label>
                                <input type="number" name="region" class="form-control" placeholder="–ö–æ–¥" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="small fw-bold">–î–∞—Ç–∞</label>
                            <input type="date" name="date" class="form-control" required>
                        </div>

                        <div class="mb-3">
                            <label class="small fw-bold">–ö–µ—Ä—ñ–≤–Ω–∏–∫ —Ä–µ–≥—ñ–æ–Ω—É (–ü–Ü–ë)</label>
                            <input type="text" name="manager_contact" class="form-control" placeholder="–ü–Ü–ë —Ç–æ–≥–æ, —Ö—Ç–æ —Å—Ö–≤–∞–ª–∏–≤" required>
                        </div>

                        <div class="category-box mb-3 shadow-sm">
                            <label class="small fw-bold d-block mb-2">–û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –≤–∏—Ç—Ä–∞—Ç–∏:</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="category" id="l1c1" value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏" checked>
                                <label class="form-check-label" for="l1c1">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ (–º—ñ—Å—Ç–æ/—Ä–µ–≥—ñ–æ–Ω)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="category" id="l1c2" value="–î–æ—Å—Ç–∞–≤–∫–∞ –ù–ü">
                                <label class="form-check-label" for="l1c2">–î–æ—Å—Ç–∞–≤–∫–∞ –ù–ü (–º—ñ—Å—Ç–æ/—Ä–µ–≥—ñ–æ–Ω)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="category" id="l1c3" value="–ó–∞–∫—É–ø–∫–∞">
                                <label class="form-check-label" for="l1c3">–ó–∞–∫—É–ø–∫–∞ (–º—ñ—Å—Ç–æ/—Ä–µ–≥—ñ–æ–Ω)</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="small fw-bold">–ö–æ–º–µ–Ω—Ç–∞—Ä</label>
                            <textarea name="comment" class="form-control" rows="2" placeholder="–û–ø–∏—à—ñ—Ç—å –¥–µ—Ç–∞–ª—ñ..."></textarea>
                        </div>

                        <div class="mb-4">
                            <label class="small fw-bold">–ß–µ–∫ (–§–∞–π–ª –∞–±–æ –°–∫—Ä—ñ–Ω—à–æ—Ç)</label>
                            <input type="file" name="receipt" id="receiptInput" class="form-control mb-2" required>
                            <div id="pasteArea" class="p-3 rounded text-center small text-muted">–ö–ª—ñ–∫–Ω–∏ —Å—é–¥–∏ + Ctrl+V</div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100 fw-bold py-2">–í–Ü–î–ü–†–ê–í–ò–¢–ò –ù–ê –†–û–ó–ì–õ–Ø–î</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const receiptInput = document.getElementById('receiptInput');
    document.addEventListener('paste', function (e) {
        const items = (e.clipboardData || e.originalEvent.clipboardData).items;
        for (let i = 0; i < items.length; i++) {
            if (items[i].type.indexOf('image') !== -1) {
                const blob = items[i].getAsFile();
                const file = new File([blob], `screenshot_${Date.now()}.png`, { type: blob.type });
                const dt = new DataTransfer(); dt.items.add(file);
                receiptInput.files = dt.files;
                alert("–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–æ!");
            }
        }
    });
</script>
</body>
</html>